”
9E:\repos\MISC-GestiuneCD\Controllers\BaseApiController.cs
	namespace 	

GestiuneCD
 
. 
Controllers  
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public

 

class

 
BaseApiController

 "
:

# $
ControllerBase

% 3
{ 
} 
} ∫
6E:\repos\MISC-GestiuneCD\Controllers\BugsController.cs
	namespace 	

GestiuneCD
 
. 
Controllers  
{ 
public		 

class		 
BugsController		 
:		  !
BaseApiController		" 3
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
BugsController 
( 
AppDbContext *
context+ 2
)2 3
{ 	
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
GetNotFoundRequest .
(. /
)/ 0
{ 	
var 
thing 
= 
_context  
.  !
CDs! $
.$ %
Find% )
() *
$num* -
)- .
;. /
if 
( 
thing 
is 
null 
) 
{ 
return 
NotFound 
(  
new  #
ApiResponse$ /
(/ 0
$num0 3
)3 4
)4 5
;5 6
} 
return   
Ok   
(   
)   
;   
}!! 	
[%% 	
HttpGet%%	 
(%% 
$str%% 
)%% 
]%%  
public&& 
ActionResult&& 
GetServerError&& *
(&&* +
)&&+ ,
{'' 	
var(( 
thing(( 
=(( 
_context((  
.((  !
CDs((! $
.(($ %
Find((% )
((() *
$num((* -
)((- .
;((. /
return,, 
Ok,, 
(,, 
),, 
;,, 
}.. 	
[22 	
HttpGet22	 
(22 
$str22 
)22 
]22 
public33 
ActionResult33 
GetBadRequest33 )
(33) *
)33* +
{44 	
return55 

BadRequest55 
(55 
new55 !
ApiResponse55" -
(55- .
$num55. 1
)551 2
)552 3
;553 4
}66 	
[88 	
HttpGet88	 
(88 
$str88 "
)88" #
]88# $
public99 
ActionResult99 
GetNotFoundRequest99 .
(99. /
int99/ 2
id993 5
)995 6
{:: 	
return;; 
Ok;; 
(;; 
);; 
;;; 
}<< 	
}== 
}>> Ÿ,
5E:\repos\MISC-GestiuneCD\Controllers\CDsController.cs
	namespace 	

GestiuneCD
 
. 
Controllers  
{ 
public		 

class		 
CDsController		 
:		  
BaseApiController		! 2
{

 
private 
readonly 

ICDService #
<# $
CD$ &
>& '
_cDsService( 3
;3 4
public 
CDsController 
( 

ICDService '
<' (
CD( *
>* +

cDsService, 6
)6 7
{ 	
_cDsService 
= 

cDsService $
;$ %
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
CD3 5
>5 6
>6 7
>7 8
GetCDs9 ?
(? @
[@ A
	FromQueryA J
]J K
CDParamsK S

parametersT ^
)^ _
{ 	
if 
( 

parameters 
is 
null "
)" #
{ 
throw 
new !
ArgumentNullException /
(/ 0
nameof0 6
(6 7

parameters7 A
)A B
)B C
;C D
} 
return 
Ok 
( 
await 
_cDsService '
.' (
GetItemsAsync( 5
(5 6

parameters6 @
.@ A
OrderedByNameA N
,N O

parametersP Z
.Z [
OrderedBySize[ h
,h i

parametersj t
.t u
MinSpatiuLiber	u É
,
É Ñ

parameters
Ö è
.
è ê%
VitezaMaxInscriptionare
ê ß
,
ß ®

parameters
© ≥
.
≥ ¥
TipCD
¥ π
,
π ∫

parameters
ª ≈
.
≈ ∆
CuSesiuniDeschise
∆ ◊
)
◊ ÿ
)
ÿ Ÿ
;
Ÿ ⁄
} 	
[%% 	
HttpGet%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
CD&&' )
>&&) *
>&&* +
GetCD&&, 1
(&&1 2
int&&2 5
id&&6 8
)&&8 9
{'' 	
try(( 
{)) 
var** 
result** 
=** 
await** "
_cDsService**# .
.**. /
GetItemByIdAsync**/ ?
(**? @
id**@ B
)**B C
;**C D
return++ 
Ok++ 
(++ 
result++  
)++  !
;++! "
},, 
catch-- 
(-- 
	Exception-- 
e-- 
)-- 
{.. 
return// 
NotFound// 
(//  
e//  !
.//! "
Message//" )
)//) *
;//* +
}00 
}11 	
[88 	
HttpPut88	 
(88 
$str88 
)88 
]88 
public99 
async99 
Task99 
<99 
IActionResult99 '
>99' (
PutCD99) .
(99. /
int99/ 2
id993 5
,995 6
CDUpdateDTO997 B
cDUpdateDTO99C N
)99N O
{:: 	
try;; 
{<< 
var== 
result== 
=== 
await== "
_cDsService==# .
.==. /
UpdateItemAsync==/ >
(==> ?
id==? A
,==A B
cDUpdateDTO==C N
)==N O
;==O P
return>> 
Ok>> 
(>> 
result>>  
)>>  !
;>>! "
}?? 
catch@@ 
(@@ 
	Exception@@ 
e@@ 
)@@ 
{AA 
returnBB 
NotFoundBB 
(BB  
eBB  !
.BB! "
MessageBB" )
)BB) *
;BB* +
}CC 
}DD 	
[KK 	
HttpPostKK	 
]KK 
publicLL 
asyncLL 
TaskLL 
<LL 
ActionResultLL &
<LL& '
CDLL' )
>LL) *
>LL* +
PostCDLL, 2
(LL2 3

CDSetupDTOLL3 =

cDSetupDTOLL> H
)LLH I
{MM 	
returnNN 
OkNN 
(NN 
awaitNN 
_cDsServiceNN '
.NN' (
CreateItemAsyncNN( 7
(NN7 8

cDSetupDTONN8 B
)NNB C
)NNC D
;NND E
}OO 	
[XX 	

HttpDeleteXX	 
(XX 
$strXX 
)XX 
]XX 
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (
DeleteCDYY) 1
(YY1 2
intYY2 5
idYY6 8
)YY8 9
{ZZ 	
try[[ 
{\\ 
var]] 
result]] 
=]] 
await]] "
_cDsService]]# .
.]]. /
DeleteItemAsync]]/ >
(]]> ?
id]]? A
)]]A B
;]]B C
return^^ 
Ok^^ 
(^^ 
result^^  
)^^  !
;^^! "
}__ 
catch`` 
(`` 
	Exception`` 
e`` 
)`` 
{aa 
returnbb 
NotFoundbb 
(bb  
ebb  !
.bb! "
Messagebb" )
)bb) *
;bb* +
}cc 
}dd 	
}ee 
}ff é
7E:\repos\MISC-GestiuneCD\Controllers\ErrorController.cs
	namespace 	
API
 
. 
Controllers 
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiExplorerSettings

 
(

 
	IgnoreApi

 "
=

# $
true

% )
)

) *
]

* +
public 

class 
ErrorController  
:! "
BaseApiController# 4
{ 
public 
IActionResult 
Error "
(" #
int# &
code' +
)+ ,
{ 	
return 
new 
ObjectResult #
(# $
new$ '
ApiResponse( 3
(3 4
code4 8
)8 9
)9 :
;: ;
} 	
} 
} «.
9E:\repos\MISC-GestiuneCD\Controllers\SesiuniController.cs
	namespace 	

GestiuneCD
 
. 
Controllers  
{ 
public 

class 
SesiuniController "
:# $
BaseApiController% 6
{ 
private 
readonly 
ISesiuneService (
<( )
Sesiune) 0
>0 1
_sesiuneService2 A
;A B
public 
SesiuniController  
(  !
ISesiuneService! 0
<0 1
Sesiune1 8
>8 9
sesiuneService: H
)H I
{ 	
_sesiuneService 
= 
sesiuneService ,
;, -
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Sesiune3 :
>: ;
>; <
>< =

GetSesiuni> H
(H I
)I J
{ 	
return 
Ok 
( 
await 
_sesiuneService +
.+ ,
GetItemsAsync, 9
(9 :
): ;
); <
;< =
}   	
[## 	
HttpGet##	 
(## 
$str## 
)## 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
ActionResult$$ &
<$$& '
Sesiune$$' .
>$$. /
>$$/ 0

GetSesiune$$1 ;
($$; <
int$$< ?
id$$@ B
)$$B C
{%% 	
try&& 
{'' 
var(( 
result(( 
=(( 
await(( "
_sesiuneService((# 2
.((2 3
GetItemByIdAsync((3 C
(((C D
id((D F
)((F G
;((G H
return)) 
Ok)) 
()) 
result))  
)))  !
;))! "
}** 
catch++ 
(++ 
	Exception++ 
e++ 
)++ 
{,, 
return-- 
NotFound-- 
(--  
e--  !
.--! "
Message--" )
)--) *
;--* +
}.. 
}// 	
[33 	
HttpPut33	 
(33 
$str33 '
)33' (
]33( )
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (

PutSesiune44) 3
(443 4
int444 7
id448 :
)44: ;
{55 	
try66 
{77 
var88 
result88 
=88 
await88 "
_sesiuneService88# 2
.882 3
UpdateItemAsync883 B
(88B C
id88C E
)88E F
;88F G
return99 
Ok99 
(99 
result99  
)99  !
;99! "
}:: 
catch;; 
(;; 
	Exception;; 
e;; 
);; 
{<< 
return== 
NotFound== 
(==  
e==  !
.==! "
Message==" )
)==) *
;==* +
}>> 
}?? 	
[CC 	
HttpPostCC	 
(CC 
$strCC "
)CC" #
]CC# $
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
<DD& '
SesiuneDD' .
>DD. /
>DD/ 0
PostSesiuneDD1 <
(DD< =
SesiuneSetupDTODD= L
sesiuneDDM T
,DDT U
decimalDDU \
?DD\ ]!
spatiuAditionalOcupatDD^ s
=DDs t
$numDDt u
)DDu v
{EE 	
tryFF 
{GG 
varHH 
resultHH 
=HH 
awaitHH "
_sesiuneServiceHH# 2
.HH2 3
CreateItemAsyncHH3 B
(HHB C
sesiuneHHC J
,HHJ K!
spatiuAditionalOcupatHHK `
)HH` a
;HHa b
returnII 
OkII 
(II 
resultII  
)II  !
;II! "
}JJ 
catchKK 
(KK 
	ExceptionKK 
eKK 
)KK 
{LL 
returnMM 
NotFoundMM 
(MM  
eMM  !
.MM! "
MessageMM" )
)MM) *
;MM* +
}NN 
}OO 	
[RR 	

HttpDeleteRR	 
(RR 
$strRR 
)RR 
]RR 
publicSS 
asyncSS 
TaskSS 
<SS 
IActionResultSS '
>SS' (
DeleteSesiuneSS) 6
(SS6 7
intSS7 :
idSS; =
)SS= >
{TT 	
tryUU 
{VV 
varWW 
resultWW 
=WW 
awaitWW "
_sesiuneServiceWW# 2
.WW2 3
DeleteItemAsyncWW3 B
(WWB C
idWWC E
)WWE F
;WWF G
returnXX 
OkXX 
(XX 
resultXX  
)XX  !
;XX! "
}YY 
catchZZ 
(ZZ 
	ExceptionZZ 
eZZ 
)ZZ 
{[[ 
return\\ 
NotFound\\ 
(\\  
e\\  !
.\\! "
Message\\" )
)\\) *
;\\* +
}]] 
}^^ 	
[bb 	
HttpGetbb	 
(bb 
$strbb 1
)bb1 2
]bb2 3
publiccc 
asynccc 
Taskcc 
<cc 
ActionResultcc &
<cc& '
Sesiunecc' .
>cc. /
>cc/ 0
InchideSesiunicc1 ?
(cc? @
)cc@ A
{dd 	
returnee 
Okee 
(ee 
awaitee 
_sesiuneServiceee +
.ee+ ,$
InchideSesiunileDeschiseee, D
(eeD E
)eeE F
)eeF G
;eeG H
}ff 	
}gg 
}hh Å 
CE:\repos\MISC-GestiuneCD\Migrations\20211018120030_InitialCreate.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
nume 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
dimensiuneMB  
=! "
table# (
.( )
Column) /
</ 0
int0 3
>3 4
(4 5
type5 9
:9 :
$str; @
,@ A
nullableB J
:J K
falseL Q
)Q R
,R S"
vitezaDeInscriptionare *
=+ ,
table- 2
.2 3
Column3 9
<9 :
int: =
>= >
(> ?
type? C
:C D
$strE J
,J K
nullableL T
:T U
falseV [
)[ \
,\ ]
tip 
= 
table 
.  
Column  &
<& '
int' *
>* +
(+ ,
type, 0
:0 1
$str2 7
,7 8
nullable9 A
:A B
falseC H
)H I
,I J
spatiuOcupat  
=! "
table# (
.( )
Column) /
</ 0
decimal0 7
>7 8
(8 9
type9 =
:= >
$str? N
,N O
nullableP X
:X Y
falseZ _
)_ `
,` a
nrDeSesiuni 
=  !
table" '
.' (
Column( .
<. /
int/ 2
>2 3
(3 4
type4 8
:8 9
$str: ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R

tipSesiune 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
type6 :
:: ;
$str< K
,K L
nullableM U
:U V
falseW \
)\ ]
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% -
,- .
x/ 0
=>1 3
x4 5
.5 6
id6 8
)8 9
;9 :
} 
) 
; 
} 	
	protected   
override   
void   
Down    $
(  $ %
MigrationBuilder  % 5
migrationBuilder  6 F
)  F G
{!! 	
migrationBuilder"" 
."" 
	DropTable"" &
(""& '
name## 
:## 
$str## 
)## 
;## 
}$$ 	
}%% 
}&& ∏
EE:\repos\MISC-GestiuneCD\Migrations\20211019085048_SecondMigration.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
SecondMigration (
:) *
	Migration+ 4
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str "
," #
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
)( )
;) *
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str "
," #
table 
: 
$str 
, 
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str  
,  !

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
, 
oldNullable 
: 
true !
)! "
;" #
} 	
}   
}!! ∞
DE:\repos\MISC-GestiuneCD\Migrations\20211019085711_ThirdMigration.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
ThirdMigration '
:( )
	Migration* 3
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str "
," #
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$num 
,  

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
, 
oldNullable 
: 
true !
)! "
;" #
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str "
," #
table 
: 
$str 
, 
type 
: 
$str 
, 
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
} 	
}   
}!! ‚
EE:\repos\MISC-GestiuneCD\Migrations\20211019191045_FourthMigration.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
FourthMigration (
:) *
	Migration+ 4
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} üE
DE:\repos\MISC-GestiuneCD\Migrations\20211020193809_FifthMigration.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
FifthMigration '
:( )
	Migration* 3
{		 
	protected

 
override

 
void

 
Up

  "
(

" #
MigrationBuilder

# 3
migrationBuilder

4 D
)

D E
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str "
," #
table 
: 
$str 
) 
; 
migrationBuilder 
. 
AlterColumn (
<( )
byte) -
>- .
(. /
name 
: 
$str 
, 
table 
: 
$str 
, 
type 
: 
$str 
,  
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str 
, 
type 
: 
$str %
,% &
	maxLength 
: 
$num 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldType 
: 
$str (
)( )
;) *
migrationBuilder!! 
.!! 
AlterColumn!! (
<!!( )
short!!) .
>!!. /
(!!/ 0
name"" 
:"" 
$str"" $
,""$ %
table## 
:## 
$str## 
,## 
type$$ 
:$$ 
$str$$  
,$$  !
nullable%% 
:%% 
false%% 
,%%  

oldClrType&& 
:&& 
typeof&& "
(&&" #
int&&# &
)&&& '
,&&' (
oldType'' 
:'' 
$str'' 
)'' 
;''  
migrationBuilder)) 
.)) 
CreateTable)) (
())( )
name** 
:** 
$str** 
,**  
columns++ 
:++ 
table++ 
=>++ !
new++" %
{,, 
id-- 
=-- 
table-- 
.-- 
Column-- %
<--% &
int--& )
>--) *
(--* +
type--+ /
:--/ 0
$str--1 6
,--6 7
nullable--8 @
:--@ A
false--B G
)--G H
... 

Annotation.. #
(..# $
$str..$ 8
,..8 9
$str..: @
)..@ A
,..A B
idCD// 
=// 
table//  
.//  !
Column//! '
<//' (
int//( +
>//+ ,
(//, -
type//- 1
://1 2
$str//3 8
,//8 9
nullable//: B
://B C
false//D I
)//I J
,//J K
startDateTime00 !
=00" #
table00$ )
.00) *
Column00* 0
<000 1
DateTime001 9
>009 :
(00: ;
type00; ?
:00? @
$str00A K
,00K L
nullable00M U
:00U V
true00W [
)00[ \
,00\ ]
endDateTime11 
=11  !
table11" '
.11' (
Column11( .
<11. /
DateTime11/ 7
>117 8
(118 9
type119 =
:11= >
$str11? I
,11I J
nullable11K S
:11S T
true11U Y
)11Y Z
,11Z [

tipSesiune22 
=22  
table22! &
.22& '
Column22' -
<22- .
byte22. 2
>222 3
(223 4
type224 8
:228 9
$str22: C
,22C D
nullable22E M
:22M N
false22O T
)22T U
,22U V
statusSesiune33 !
=33" #
table33$ )
.33) *
Column33* 0
<330 1
int331 4
>334 5
(335 6
type336 :
:33: ;
$str33< A
,33A B
nullable33C K
:33K L
false33M R
)33R S
}44 
,44 
constraints55 
:55 
table55 "
=>55# %
{66 
table77 
.77 

PrimaryKey77 $
(77$ %
$str77% 1
,771 2
x773 4
=>775 7
x778 9
.779 :
id77: <
)77< =
;77= >
table88 
.88 

ForeignKey88 $
(88$ %
name99 
:99 
$str99 3
,993 4
column:: 
::: 
x::  !
=>::" $
x::% &
.::& '
idCD::' +
,::+ ,
principalTable;; &
:;;& '
$str;;( -
,;;- .
principalColumn<< '
:<<' (
$str<<) -
,<<- .
onDelete==  
:==  !
ReferentialAction==" 3
.==3 4
Cascade==4 ;
)==; <
;==< =
}>> 
)>> 
;>> 
migrationBuilder@@ 
.@@ 
CreateIndex@@ (
(@@( )
nameAA 
:AA 
$strAA '
,AA' (
tableBB 
:BB 
$strBB  
,BB  !
columnCC 
:CC 
$strCC 
)CC 
;CC  
}DD 	
	protectedFF 
overrideFF 
voidFF 
DownFF  $
(FF$ %
MigrationBuilderFF% 5
migrationBuilderFF6 F
)FFF G
{GG 	
migrationBuilderHH 
.HH 
	DropTableHH &
(HH& '
nameII 
:II 
$strII 
)II  
;II  !
migrationBuilderKK 
.KK 
AlterColumnKK (
<KK( )
intKK) ,
>KK, -
(KK- .
nameLL 
:LL 
$strLL 
,LL 
tableMM 
:MM 
$strMM 
,MM 
typeNN 
:NN 
$strNN 
,NN 
nullableOO 
:OO 
falseOO 
,OO  

oldClrTypePP 
:PP 
typeofPP "
(PP" #
bytePP# '
)PP' (
,PP( )
oldTypeQQ 
:QQ 
$strQQ "
)QQ" #
;QQ# $
migrationBuilderSS 
.SS 
AlterColumnSS (
<SS( )
stringSS) /
>SS/ 0
(SS0 1
nameTT 
:TT 
$strTT 
,TT 
tableUU 
:UU 
$strUU 
,UU 
typeVV 
:VV 
$strVV %
,VV% &
nullableWW 
:WW 
falseWW 
,WW  

oldClrTypeXX 
:XX 
typeofXX "
(XX" #
stringXX# )
)XX) *
,XX* +
oldTypeYY 
:YY 
$strYY (
,YY( )
oldMaxLengthZZ 
:ZZ 
$numZZ !
)ZZ! "
;ZZ" #
migrationBuilder\\ 
.\\ 
AlterColumn\\ (
<\\( )
int\\) ,
>\\, -
(\\- .
name]] 
:]] 
$str]] $
,]]$ %
table^^ 
:^^ 
$str^^ 
,^^ 
type__ 
:__ 
$str__ 
,__ 
nullable`` 
:`` 
false`` 
,``  

oldClrTypeaa 
:aa 
typeofaa "
(aa" #
shortaa# (
)aa( )
,aa) *
oldTypebb 
:bb 
$strbb #
)bb# $
;bb$ %
migrationBuilderdd 
.dd 
	AddColumndd &
<dd& '
intdd' *
>dd* +
(dd+ ,
nameee 
:ee 
$stree "
,ee" #
tableff 
:ff 
$strff 
,ff 
typegg 
:gg 
$strgg 
,gg 
nullablehh 
:hh 
falsehh 
,hh  
defaultValueii 
:ii 
$numii 
)ii  
;ii  !
}jj 	
}kk 
}ll ƒ
DE:\repos\MISC-GestiuneCD\Migrations\20211022083438_SixthMigration.cs
	namespace 	

GestiuneCD
 
. 

Migrations 
{ 
public 

partial 
class 
SixthMigration '
:( )
	Migration* 3
{ 
	protected		 
override		 
void		 
Up		  "
(		" #
MigrationBuilder		# 3
migrationBuilder		4 D
)		D E
{

 	
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str .
,. /
table 
: 
$str 
, 
newName 
: 
$str 2
)2 3
;3 4
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str ,
,, -
table 
: 
$str  
,  !
type 
: 
$str 
, 
nullable 
: 
true 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str ,
,, -
table 
: 
$str  
)  !
;! "
migrationBuilder 
. 
RenameColumn )
() *
name 
: 
$str /
,/ 0
table 
: 
$str 
, 
newName   
:   
$str   1
)  1 2
;  2 3
}!! 	
}"" 
}## ¬
2E:\repos\MISC-GestiuneCD\Models\DTOs\CDSetupDTO.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
DTOs  
{ 
public

 

class

 

CDSetupDTO

 
{ 
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 7
)7 8
]8 9
[ 	
StringLength	 
( 
$num 
, 
MinimumLength '
=( )
$num* +
,+ ,
ErrorMessage 
= 
$str ]
)] ^
]^ _
[ 	
DataType	 
( 
DataType 
. 
Text 
)  
]  !
public 
string 
? 
Nume 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 7
)7 8
]8 9
public  
VitezaInscriptionare ##
VitezaMaxInscriptionare$ ;
{< =
get> A
;A B
setC F
;F G
}H I
[ 	
Required	 
] 
public 
TipCD 
Tip 
{ 
get 
; 
set  #
;# $
}% &
[!! 	
Required!!	 
]!! 
["" 	
Column""	 
("" 
TypeName"" 
="" 
$str"" *
)""* +
]""+ ,
public## 
decimal## 
SpatiuOcupat## #
{##$ %
get##& )
;##) *
set##+ .
;##. /
}##0 1
}$$ 
}%% Ê
3E:\repos\MISC-GestiuneCD\Models\DTOs\CDUpdateDTO.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
DTOs  
{ 
public		 

class		 
CDUpdateDTO		 
{

 
[ 	
Required	 
] 
public 
string 
? 
Nume 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public  
VitezaInscriptionare ##
VitezaMaxInscriptionare$ ;
{< =
get> A
;A B
setC F
;F G
}H I
} 
} ä
7E:\repos\MISC-GestiuneCD\Models\DTOs\SesiuneSetupDTO.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
DTOs  
{ 
public		 

class		 
SesiuneSetupDTO		  
{

 
[ 	
Required	 
] 
public 
int 
IdCD 
{ 
get 
; 
set "
;" #
}$ %
[ 	
Required	 
] 
public 

TipSesiune 

TipSesiune $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public  
VitezaInscriptionare #
?# $ 
VitezaInscriptionare% 9
{: ;
get< ?
;? @
setA D
;D E
}F G
} 
} ∑
6E:\repos\MISC-GestiuneCD\Models\Entities\BaseEntity.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Entities $
{ 
public 

class 

BaseEntity 
{ 
public 
int 
ID 
{ 
get 
; 
set  
;  !
}" #
} 
} Í
.E:\repos\MISC-GestiuneCD\Models\Entities\CD.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Entities $
{ 
public

 

class

 
CD

 
:

 

BaseEntity

  
{ 
public 
string 
Nume 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
DimensiuneMB 
{  !
get" %
;% &
set' *
;* +
}, -
public  
VitezaInscriptionare ##
VitezaMaxInscriptionare$ ;
{< =
get> A
;A B
setC F
;F G
}H I
public 
TipCD 
Tip 
{ 
get 
; 
set  #
;# $
}% &
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public   
decimal   
SpatiuOcupat   #
{  $ %
get  & )
;  ) *
set  + .
;  . /
}  0 1
public$$ 
int$$ 
NrDeSesiuni$$ 
{$$  
get$$! $
;$$$ %
set$$& )
;$$) *
}$$+ ,
=$$- .
$num$$/ 0
;$$0 1
public)) 
CD)) 
()) 
))) 
{** 	
}++ 	
public66 
CD66 
(66 
string66 
nume66 
,66 
int66 "
dimensiuneMB66# /
,66/ 0 
VitezaInscriptionare661 E#
vitezaMaxInscriptionare66F ]
,66] ^
TipCD66_ d
tip66e h
,66h i
decimal66j q
spatiuOcupat66r ~
,66~ 
int
66Ä É
nrDeSesiuni
66Ñ è
)
66è ê
{77 	
this88 
.88 
Nume88 
=88 
nume88 
;88 
this99 
.99 
DimensiuneMB99 
=99 
dimensiuneMB99  ,
;99, -
this:: 
.:: #
VitezaMaxInscriptionare:: (
=::) *#
vitezaMaxInscriptionare::+ B
;::B C
this;; 
.;; 
Tip;; 
=;; 
tip;; 
;;; 
this<< 
.<< 
SpatiuOcupat<< 
=<< 
spatiuOcupat<<  ,
;<<, -
this== 
.== 
NrDeSesiuni== 
=== 
nrDeSesiuni== *
;==* +
}>> 	
publicDD 
staticDD 
implicitDD 
operatorDD '
CDDD( *
(DD* +
ActionResultDD+ 7
<DD7 8
CDDD8 :
>DD: ;
vDD< =
)DD= >
{EE 	
throwFF 
newFF #
NotImplementedExceptionFF -
(FF- .
)FF. /
;FF/ 0
}GG 	
}HH 
}II ˜
3E:\repos\MISC-GestiuneCD\Models\Entities\Sesiune.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Entities $
{ 
public 

class 
Sesiune 
: 

BaseEntity %
{		 
public 
Sesiune 
( 
) 
{ 	
} 	
public 
Sesiune 
( 
CD 
cd 
, 
int !
idCD" &
,& '
DateTime( 0
?0 1
startDateTime2 ?
,? @
DateTimeA I
?I J
endDateTimeK V
,V W

TipSesiuneX b

tipSesiunec m
,m n!
VitezaInscriptionare	o É
?
É Ñ"
vitezaInscriptionare
Ö ô
,
ô ö
StatusSesiune
õ ®
statusSesiune
© ∂
)
∂ ∑
{ 	
this 
. 
Cd 
= 
cd 
; 
this 
. 
IdCD 
= 
idCD 
; 
this 
. 
StartDateTime 
=  
startDateTime! .
;. /
this   
.   
EndDateTime   
=   
endDateTime   *
;  * +
this!! 
.!! 

TipSesiune!! 
=!! 

tipSesiune!! (
;!!( )
this"" 
."" 
StatusSesiune"" 
=""  
statusSesiune""! .
;"". /
this## 
.##  
VitezaInscriptionare## %
=##& ' 
vitezaInscriptionare##( <
;##< =
}$$ 	
public)) 
CD)) 
Cd)) 
{)) 
get)) 
;)) 
set)) 
;))  
}))! "
public-- 
int-- 
IdCD-- 
{-- 
get-- 
;-- 
set-- "
;--" #
}--$ %
public11 
DateTime11 
?11 
StartDateTime11 &
{11' (
get11) ,
;11, -
set11. 1
;111 2
}113 4
=115 6
null117 ;
;11; <
public55 
DateTime55 
?55 
EndDateTime55 $
{55% &
get55' *
;55* +
set55, /
;55/ 0
}551 2
=553 4
null555 9
;559 :
public99 

TipSesiune99 

TipSesiune99 $
{99% &
get99' *
;99* +
set99+ .
;99. /
}990 1
public== 
StatusSesiune== 
StatusSesiune== *
{==+ ,
get==- 0
;==0 1
set==2 5
;==5 6
}==7 8
publicAA  
VitezaInscriptionareAA #
?AA# $ 
VitezaInscriptionareAA% 9
{AA: ;
getAA< ?
;AA? @
setAAA D
;AAD E
}AAF G
}CC 
}DD €
6E:\repos\MISC-GestiuneCD\Models\Enums\StatusSesiune.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Enums !
{ 
public 

enum 
StatusSesiune 
{ 
Deschis 
, 
Inchis		 
}

 
} Ê
.E:\repos\MISC-GestiuneCD\Models\Enums\TipCD.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Enums !
{ 
public 

enum 
TipCD 
{ 
CDDA 
, 
CDR		 
,		 
CDRW

 
} 
} ’
3E:\repos\MISC-GestiuneCD\Models\Enums\TipSesiune.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Enums !
{ 
public 

enum 

TipSesiune 
{ 
Citire 
, 
Scriere		 
}

 
} Ä
=E:\repos\MISC-GestiuneCD\Models\Enums\VitezaInscriptionare.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Enums !
{ 
public 

enum  
VitezaInscriptionare $
{ 
x4 

,
 
x8		 

,		
 
x16

 
,

 
x24 
, 
x32 
, 
x40 
, 
x48 
} 
} Ô
6E:\repos\MISC-GestiuneCD\Models\Errors\ApiException.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Errors "
{ 
public 

class 
ApiException 
: 
ApiResponse  +
{ 
public 
ApiException 
( 
int 

statusCode  *
,* +
string, 2
message3 :
=; <
null= A
,A B
stringC I
detailsJ Q
=R S
nullT X
)X Y
:Z [
base\ `
(` a

statusCodea k
,k l
messagem t
)t u
{ 	
Details 
= 
details 
; 
} 	
public

 
string

 
Details

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
} 
} Ï
5E:\repos\MISC-GestiuneCD\Models\Errors\ApiResponse.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Errors "
{ 
public 

class 
ApiResponse 
{ 
public 
ApiResponse 
( 
int 

statusCode )
,) *
string+ 1
message2 9
=: ;
null< @
)@ A
{ 	

StatusCode 
= 

statusCode #
;# $
Message 
= 
message 
??  *
GetDefaultMessageForStatusCode! ?
(? @

statusCode@ J
)J K
;K L
}		 	
public 
int 

StatusCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Message 
{ 
get  #
;# $
set% (
;( )
}* +
private 
string *
GetDefaultMessageForStatusCode 5
(5 6
int6 9

statusCode: D
)D E
{ 	
return 

statusCode 
switch $
{ 
$num 
=> 
$str %
,% &
$num 
=> 
$str "
," #
$num 
=> 
$str -
,- .
_ 
=> 
null 
} 
; 
} 	
} 
} ˝
?E:\repos\MISC-GestiuneCD\Models\Errors\ApiValidationResponse.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Errors "
{ 
public 

class &
ApiValidationErrorResponse +
:, -
ApiResponse. 9
{ 
public &
ApiValidationErrorResponse )
() *
)* +
:, -
base. 2
(2 3
$num3 6
)6 7
{ 	
} 	
public 
IEnumerable 
< 
string !
>! "
Errors# )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
}		 
}

 Œ
AE:\repos\MISC-GestiuneCD\Models\Middleware\ExceptionMiddleware.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 

Middleware &
{ 
public		 

class		 
ExceptionMiddleware		 $
{

 
private 
readonly 
RequestDelegate (
_next) .
;. /
private 
readonly 
ILogger  
<  !
ExceptionMiddleware! 4
>4 5
_logger6 =
;= >
private 
readonly 
IHostEnvironment )
_env* .
;. /
public 
ExceptionMiddleware "
(" #
RequestDelegate# 2
next3 7
,7 8
ILogger9 @
<@ A
ExceptionMiddlewareA T
>T U
loggerV \
,\ ]
IHostEnvironment^ n
envo r
)r s
{ 	
_env 
= 
env 
; 
_logger 
= 
logger 
; 
_next 
= 
next 
; 
} 	
public 
async 
Task 
InvokeAsync %
(% &
HttpContext& 1
context2 9
)9 :
{ 	
try 
{ 
await 
_next 
( 
context #
)# $
;$ %
} 
catch 
( 
	Exception 
ex 
)  
{   
_logger!! 
.!! 
LogError!!  
(!!  !
ex!!! #
,!!# $
ex!!% '
.!!' (
Message!!( /
)!!/ 0
;!!0 1
context"" 
."" 
Response""  
.""  !
ContentType""! ,
=""- .
$str""/ A
;""A B
context## 
.## 
Response##  
.##  !

StatusCode##! +
=##, -
(##. /
int##/ 2
)##2 3
HttpStatusCode##3 A
.##A B
InternalServerError##B U
;##U V
var%% 
response%% 
=%% 
new%% "
ApiException%%# /
(%%/ 0
(%%0 1
int%%1 4
)%%4 5
HttpStatusCode%%5 C
.%%C D
InternalServerError%%D W
,%%W X
ex%%Y [
.%%[ \
Message%%\ c
,%%c d
ex%%e g
.%%g h

StackTrace%%h r
.%%r s
ToString%%s {
(%%{ |
)%%| }
)%%} ~
;%%~ 
var'' 
options'' 
='' 
new'' !!
JsonSerializerOptions''" 7
{''7 8 
PropertyNamingPolicy''8 L
=''M N
JsonNamingPolicy''O _
.''_ `
	CamelCase''` i
}''i j
;''j k
var)) 
json)) 
=)) 
JsonSerializer)) )
.))) *
	Serialize))* 3
())3 4
response))4 <
,))< =
options))> E
)))E F
;))F G
await++ 
context++ 
.++ 
Response++ &
.++& '

WriteAsync++' 1
(++1 2
json++2 6
)++6 7
;++7 8
},, 
}-- 	
}.. 
}// ˘
:E:\repos\MISC-GestiuneCD\Models\Specifications\CDParams.cs
	namespace 	

GestiuneCD
 
. 
Models 
. 
Specifications *
{ 
public 

class 
CDParams 
{		 
public 
bool 
? 
OrderedByName "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
false3 8
;8 9
public 
bool 
? 
OrderedBySize "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
false3 8
;8 9
public 
int 
? 
MinSpatiuLiber "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
$num3 4
;4 5
public  
VitezaInscriptionare #
?# $#
VitezaMaxInscriptionare% <
{= >
get? B
;B C
setD G
;G H
}I J
=K L
nullM Q
;Q R
public 
TipCD 
? 
TipCD 
{ 
get !
;! "
set# &
;& '
}( )
=* +
null, 0
;0 1
public!! 
bool!! 
?!! 
CuSesiuniDeschise!! &
{!!' (
get!!) ,
;!!, -
set!!. 1
;!!1 2
}!!3 4
=!!5 6
null!!7 ;
;!!; <
}"" 
}## ‰
4E:\repos\MISC-GestiuneCD\Persistence\AppDbContext.cs
	namespace 	

GestiuneCD
 
. 
Persistence  
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:

 
base

 
(

 
options

 
)

 
{ 	
} 	
public 
DbSet 
< 
CD 
> 
CDs 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DbSet 
< 
Sesiune 
> 
Sesiuni %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
base 
. 
OnModelCreating  
(  !
modelBuilder! -
)- .
;. /
modelBuilder 
. +
ApplyConfigurationsFromAssembly 8
(8 9
Assembly9 A
.A B 
GetExecutingAssemblyB V
(V W
)W X
)X Y
;Y Z
foreach 
( 
var 

entityType #
in$ &
modelBuilder' 3
.3 4
Model4 9
.9 :
GetEntityTypes: H
(H I
)I J
)J K
{ 
var 

properties "
=# $

entityType% /
./ 0
ClrType0 7
.7 8
GetProperties8 E
(E F
)F G
.G H
WhereH M
(M N
pN O
=>P R
pS T
.T U
PropertyTypeU a
==b d
typeofe k
(k l
decimall s
)s t
)t u
;u v
var 
dateTimeProperties *
=+ ,

entityType- 7
.7 8
ClrType8 ?
.? @
GetProperties@ M
(M N
)N O
. 
Where 
( 
p  
=>! #
p$ %
.% &
PropertyType& 2
==3 5
typeof6 <
(< =
DateTimeOffset= K
)K L
)L M
;M N
foreach 
( 
var  
property! )
in* ,

properties- 7
)7 8
{ 
modelBuilder $
.$ %
Entity% +
(+ ,

entityType, 6
.6 7
Name7 ;
); <
.< =
Property= E
(E F
propertyF N
.N O
NameO S
)S T
.T U
HasConversionU b
<b c
doublec i
>i j
(j k
)k l
;l m
} 
}   
}!! 	
}"" 
}## ˜
>E:\repos\MISC-GestiuneCD\Persistence\Config\CDConfiguration.cs
	namespace 	

GestiuneCD
 
. 
Persistence  
.  !
Config! '
{ 
public 

class 
CDConfiguration  
:! "$
IEntityTypeConfiguration# ;
<; <
CD< >
>> ?
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
CD		0 2
>		2 3
builder		4 ;
)		; <
{

 	
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
Nume$ (
)( )
.) *

IsRequired* 4
(4 5
)5 6
.6 7
HasMaxLength7 C
(C D
$numD G
)G H
;H I
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
Tip$ '
)' (
.( )

IsRequired) 3
(3 4
)4 5
.5 6
HasColumnType6 C
(C D
$strD M
)M N
;N O
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
DimensiuneMB$ 0
)0 1
.1 2

IsRequired2 <
(< =
)= >
.> ?
HasColumnType? L
(L M
$strM W
)W X
;X Y
} 	
} 
} ò
CE:\repos\MISC-GestiuneCD\Persistence\Config\SesiuneConfiguration.cs
	namespace 	

GestiuneCD
 
. 
Persistence  
.  !
Config! '
{ 
public 

class  
SesiuneConfiguration %
:& '$
IEntityTypeConfiguration( @
<@ A
SesiuneA H
>H I
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
Sesiune		0 7
>		7 8
builder		9 @
)		@ A
{

 	
builder 
. 
Property 
( 
p 
=> !
p" #
.# $

TipSesiune$ .
). /
./ 0

IsRequired0 :
(: ;
); <
.< =
HasColumnType= J
(J K
$strK T
)T U
;U V
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
IdCD$ (
)( )
.) *

IsRequired* 4
(4 5
)5 6
;6 7
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
StartDateTime$ 1
)1 2
.2 3
HasColumnType3 @
(@ A
$strA K
)K L
;L M
builder 
. 
Property 
( 
p 
=> !
p" #
.# $
EndDateTime$ /
)/ 0
.0 1
HasColumnType1 >
(> ?
$str? I
)I J
;J K
builder 
. 
HasOne 
( 
b 
=> 
b  !
.! "
Cd" $
)$ %
.% &
WithMany& .
(. /
)/ 0
. 
HasForeignKey 
( 
p  
=>! #
p$ %
.% &
IdCD& *
)* +
;+ ,
} 	
} 
} õ
6E:\repos\MISC-GestiuneCD\Persistence\DbInitializer .cs
	namespace 	

GestiuneCD
 
. 
Persistence  
{ 
public 

class 
DbInitializer 
:  
IDbInitializer! /
{ 
private		 
readonly		  
IServiceScopeFactory		 -
_scopeFactory		. ;
;		; <
public 
DbInitializer 
(  
IServiceScopeFactory 1
scopeFactory2 >
)> ?
{ 	
_scopeFactory 
= 
scopeFactory (
;( )
} 	
public 
void 

Initialize 
( 
)  
{ 	
using 
var 
serviceScope "
=# $
_scopeFactory% 2
.2 3
CreateScope3 >
(> ?
)? @
;@ A
using 
var 
context 
= 
serviceScope  ,
., -
ServiceProvider- <
.< =

GetService= G
<G H
AppDbContextH T
>T U
(U V
)V W
;W X
context 
. 
Database 
. 
Migrate $
($ %
)% &
;& '
} 	
public 
void 
SeedData 
( 
) 
{ 	
using 
var 
serviceScope "
=# $
_scopeFactory% 2
.2 3
CreateScope3 >
(> ?
)? @
;@ A
using 
var 
context 
= 
serviceScope  ,
., -
ServiceProvider- <
.< =

GetService= G
<G H
AppDbContextH T
>T U
(U V
)V W
;W X
if 
( 
! 
context 
. 
CDs 
. 
Any  
(  !
)! "
)" #
{ 
var 
	adminUser 
= 
new  #
CD$ &
{   
Nume!! 
=!! 
$str!! "
,!!" #
Tip"" 
="" 
TipCD"" 
.""  
CDRW""  $
,""$ %
NrDeSesiuni## 
=##  !
$num##" #
,### $
DimensiuneMB$$  
=$$! "
$num$$# &
,$$& '
SpatiuOcupat%%  
=%%! "
$num%%# &
,%%& '#
VitezaMaxInscriptionare&& +
=&&, - 
VitezaInscriptionare&&. B
.&&B C
x4&&C E
}'' 
;'' 
context(( 
.(( 
CDs(( 
.(( 
Add(( 
(((  
	adminUser((  )
)(() *
;((* +
})) 
context++ 
.++ 
SaveChanges++ 
(++  
)++  !
;++! "
},, 	
}-- 
}.. ∏
6E:\repos\MISC-GestiuneCD\Persistence\IDbInitializer.cs
	namespace 	

GestiuneCD
 
. 
Persistence  
{ 
public 

	interface 
IDbInitializer #
{ 
void		 

Initialize		 
(		 
)		 
;		 
void 
SeedData 
( 
) 
; 
} 
} ÿ5
#E:\repos\MISC-GestiuneCD\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
	AddScoped 
< 

ICDService %
<% &
CD& (
>( )
,) *
	CDService+ 4
>4 5
(5 6
)6 7
;7 8
builder 
. 
Services 
. 
	AddScoped 
< 
ISesiuneService *
<* +
Sesiune+ 2
>2 3
,3 4
SesiuneService5 C
>C D
(D E
)E F
;F G
builder 
. 
Services 
. 
	AddScoped 
< 
IDbInitializer )
,) *
DbInitializer+ 8
>8 9
(9 :
): ;
;; <
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. 
AddDbContext 
< 
AppDbContext *
>* +
(+ ,
opt, /
=>0 2
opt3 6
.6 7
UseSqlServer7 C
(C D
builderD K
.K L
ConfigurationL Y
.Y Z
GetConnectionStringZ m
(m n
$strn s
)s t
)t u
)u v
;v w
builder 
. 
Services 
. 
	Configure 
< 
ApiBehaviorOptions -
>- .
(. /
opt/ 2
=>3 5
{ 
opt 
. ,
 InvalidModelStateResponseFactory (
=) *
actionContext+ 8
=>9 ;
{ 
var 
errors 
= 
actionContext "
." #

ModelState# -
. 	
Where	 
( 
f 
=> 
f 
. 
Value 
. 
Errors "
." #
Count# (
>) *
$num+ ,
), -
. 	

SelectMany	 
( 
f 
=> 
f 
. 
Value  
.  !
Errors! '
)' (
. 	
Select	 
( 
f 
=> 
f 
. 
ErrorMessage #
)# $
.$ %
ToArray% ,
(, -
)- .
;. /
var!! 
errorResponse!! 
=!! 
new!! &
ApiValidationErrorResponse!!  :
{"" 	
Errors## 
=## 
errors## 
}$$ 	
;$$	 

return&& 
new&& "
BadRequestObjectResult&& )
(&&) *
errorResponse&&* 7
)&&7 8
;&&8 9
}'' 
;'' 
}(( 
)(( 
;(( 
builder++ 
.++ 
Services++ 
.++ #
AddEndpointsApiExplorer++ (
(++( )
)++) *
;++* +
builder-- 
.-- 
Services-- 
.-- 
AddSwaggerGen-- 
(-- 
c--  
=>--! #
{.. 
c// 
.// 

SwaggerDoc// 
(// 
$str// 
,// 
new// 
OpenApiInfo// &
{00 
Version11 
=11 
$str11 
,11 
Title22 
=22 
$str22 6
}33 
)33 
;33 
var66 
xmlFile66 
=66 
$"66 
{66 
Assembly66 
.66  
GetExecutingAssembly66 2
(662 3
)663 4
.664 5
GetName665 <
(66< =
)66= >
.66> ?
Name66? C
}66C D
$str66D H
"66H I
;66I J
var77 
xmlPath77 
=77 
Path77 
.77 
Combine77 
(77 

AppContext77 )
.77) *
BaseDirectory77* 7
,777 8
xmlFile779 @
)77@ A
;77A B
c88 
.88 
IncludeXmlComments88 
(88 
xmlPath88  
)88  !
;88! "
}99 
)99 
;99 
var;; 
app;; 
=;; 	
builder;;
 
.;; 
Build;; 
(;; 
);; 
;;; 
app>> 
.>> 
UseMiddleware>> 
<>> 
ExceptionMiddleware>> %
>>>% &
(>>& '
)>>' (
;>>( )
ifAA 
(AA 
appAA 
.AA 
EnvironmentAA 
.AA 
IsDevelopmentAA !
(AA! "
)AA" #
)AA# $
{BB 
appCC 
.CC 

UseSwaggerCC 
(CC 
)CC 
;CC 
appDD 
.DD 
UseSwaggerUIDD 
(DD 
)DD 
;DD 
}EE 
appHH 
.HH +
UseStatusCodePagesWithReExecuteHH #
(HH# $
$strHH$ 1
)HH1 2
;HH2 3
appJJ 
.JJ 
UseHttpsRedirectionJJ 
(JJ 
)JJ 
;JJ 
appLL 
.LL 
UseAuthorizationLL 
(LL 
)LL 
;LL 
appNN 
.NN 
MapControllersNN 
(NN 
)NN 
;NN 
varQQ 
scopeFactoryQQ 
=QQ 
appQQ 
.QQ 
ServicesQQ 
.QQ  
GetRequiredServiceQQ  2
<QQ2 3 
IServiceScopeFactoryQQ3 G
>QQG H
(QQH I
)QQI J
;QQJ K
usingRR 
(RR 
varRR 

scopeRR 
=RR 
scopeFactoryRR 
.RR  
CreateScopeRR  +
(RR+ ,
)RR, -
)RR- .
{SS 
varTT 
dbInitializerTT 
=TT 
scopeTT 
.TT 
ServiceProviderTT -
.TT- .

GetServiceTT. 8
<TT8 9
IDbInitializerTT9 G
>TTG H
(TTH I
)TTI J
;TTJ K
dbInitializerUU 
.UU 

InitializeUU 
(UU 
)UU 
;UU 
dbInitializerVV 
.VV 
SeedDataVV 
(VV 
)VV 
;VV 
}WW 
appYY 
.YY 
RunYY 
(YY 
)YY 	
;YY	 
´b
.E:\repos\MISC-GestiuneCD\Services\CDService.cs
	namespace		 	

GestiuneCD		
 
.		 
Services		 
{

 
public 

class 
	CDService 
: 

ICDService '
<' (
CD( *
>* +
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
	CDService 
( 
AppDbContext %
context& -
)- .
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
ActionResult &
<& '
CD' )
>) *
>* +
CreateItemAsync, ;
(; <

CDSetupDTO< F
entityG M
)M N
{ 	
int 
dimensiuneMB 
= 
(  
entity  &
.& '
Tip' *
==+ -
TipCD. 3
.3 4
CDDA4 8
)8 9
?: ;
$num< ?
:@ A
$numB E
;E F
if 
( 
entity 
. 
SpatiuOcupat #
>$ %
dimensiuneMB& 2
)2 3
throw 
new 
	Exception #
(# $
$str$ c
)c d
;d e
CD 
tempCD 
= 
new 
( 
entity "
." #
Nume# '
,' (
dimensiuneMB) 5
,5 6
entity7 =
.= >#
VitezaMaxInscriptionare> U
,U V
entityW ]
.] ^
Tip^ a
,a b
entityc i
.i j
SpatiuOcupatj v
,v w
$numx y
)y z
;z {
_context 
. 
CDs 
. 
Add 
( 
tempCD #
)# $
;$ %
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return 
tempCD 
; 
}   	
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '
CD""' )
>"") *
>""* +
DeleteItemAsync"", ;
(""; <
int""< ?
id""@ B
)""B C
{## 	
if$$ 
($$ 
!$$ 
CDExists$$ 
($$ 
id$$ 
)$$ 
)$$ 
throw%% 
new%% 
	Exception%% #
(%%# $
$str%%$ O
)%%O P
;%%P Q
CD'' 
tempCD'' 
='' 
await'' 
_context'' &
.''& '
	FindAsync''' 0
<''0 1
CD''1 3
>''3 4
(''4 5
id''5 7
)''7 8
;''8 9
_context(( 
.(( 
Remove(( 
((( 
tempCD(( "
)((" #
;((# $
await)) 
_context)) 
.)) 
SaveChangesAsync)) +
())+ ,
))), -
;))- .
return** 
tempCD** 
;** 
}++ 	
public-- 
async-- 
Task-- 
<-- 
CD-- 
>-- 
GetItemByIdAsync-- .
(--. /
int--/ 2
id--3 5
)--5 6
{.. 	
if// 
(// 
!// 
CDExists// 
(// 
id// 
)// 
)// 
throw00 
new00 
	Exception00 #
(00# $
$str00$ O
)00O P
;00P Q
return22 
await22 
_context22 !
.22! "
	FindAsync22" +
<22+ ,
CD22, .
>22. /
(22/ 0
id220 2
)222 3
;223 4
}33 	
public55 
async55 
Task55 
<55 
IEnumerable55 %
<55% &
CD55& (
>55( )
>55) *
GetItemsAsync55+ 8
(558 9
bool559 =
?55= >
orderedByName55? L
=55M N
false55O T
,55T U
bool55V Z
?55Z [
orderedBySize55\ i
=55j k
false55l q
,55q r
int55s v
?55v w
minSpatiuLiber	55x Ü
=
55á à
$num
55â ä
,
55ä ã"
VitezaInscriptionare
55å †
?
55† °$
vitezaDeInscriptionare
55¢ ∏
=
55π ∫
null
55ª ø
,
55ø ¿
TipCD
55¡ ∆
?
55∆ «
tipCD
55» Õ
=
55Œ œ
null
55– ‘
,
55‘ ’
bool
55÷ ⁄
?
55⁄ €
cuSesiuniDeschise
55‹ Ì
=
55Ó Ô
null
55 Ù
)
55Ù ı
{66 	

IQueryable88 
<88 
CD88 
>88 
result88 !
=88" #
_context88$ ,
.88, -
CDs88- 0
;880 1
if:: 
(:: 
orderedByName:: 
==::  
true::! %
)::% &
result;; 
=;; 
result;; 
.;;  
OrderBy;;  '
(;;' (
f;;( )
=>;;* ,
f;;- .
.;;. /
Nume;;/ 3
);;3 4
;;;4 5
if== 
(== 
orderedBySize== 
====  
true==! %
)==% &
result>> 
=>> 
result>> 
.>>  
OrderBy>>  '
(>>' (
f>>( )
=>>>* ,
f>>- .
.>>. /
DimensiuneMB>>/ ;
)>>; <
;>>< =
if@@ 
(@@ 
minSpatiuLiber@@ 
>@@  
$num@@! "
)@@" #
resultAA 
=AA 
resultAA 
.AA  
WhereAA  %
(AA% &
fAA& '
=>AA( *
(AA+ ,
fAA, -
.AA- .
DimensiuneMBAA. :
-AA; <
fAA= >
.AA> ?
SpatiuOcupatAA? K
)AAK L
>=AAM O
minSpatiuLiberAAP ^
)AA^ _
;AA_ `
ifCC 
(CC "
vitezaDeInscriptionareCC &
isCC' )
notCC* -
nullCC. 2
)CC2 3
resultDD 
=DD 
resultDD 
.DD  
WhereDD  %
(DD% &
fDD& '
=>DD( *
fDD+ ,
.DD, -#
VitezaMaxInscriptionareDD- D
.DDD E
EqualsDDE K
(DDK L"
vitezaDeInscriptionareDDL b
)DDb c
)DDc d
;DDd e
ifFF 
(FF 
tipCDFF 
isFF 
notFF 
nullFF !
)FF! "
resultGG 
=GG 
resultGG 
.GG  
WhereGG  %
(GG% &
fGG& '
=>GG( *
fGG+ ,
.GG, -
TipGG- 0
==GG1 3
tipCDGG4 9
)GG9 :
;GG: ;
switchII 
(II 
cuSesiuniDeschiseII $
)II$ %
{II& '
caseJJ 
trueJJ 
:JJ 
resultKK 
=KK 5
)IntoarceCDuriInFunctieDeSesiunileDeschiseKK F
(KKF G
resultKKG M
,KKM N
StatusSesiuneKKN [
.KK[ \
DeschisKK\ c
)KKc d
;KKd e
breakLL 
;LL 
caseMM 
falseMM 
:MM 
resultNN 
=NN 5
)IntoarceCDuriInFunctieDeSesiunileDeschiseNN F
(NNF G
resultNNG M
,NNM N
StatusSesiuneNNN [
.NN[ \
InchisNN\ b
)NNb c
;NNc d
breakOO 
;OO 
defaultPP 
:PP 
breakQQ 
;QQ 
}RR 
returnTT 
awaitTT 
resultTT 
.TT  
ToListAsyncTT  +
(TT+ ,
)TT, -
;TT- .
}UU 	
privateXX 

IQueryableXX 
<XX 
CDXX 
>XX 5
)IntoarceCDuriInFunctieDeSesiunileDeschiseXX H
(XXH I

IQueryableXXI S
<XXS T
CDXXT V
>XXV W
initialListXXX c
,XXc d
StatusSesiuneXXd q
statusSesiuneXXr 
)	XX Ä
{YY 	
varZZ  
listaSesiuniDeschiseZZ $
=ZZ% &
_contextZZ' /
.ZZ/ 0
SesiuniZZ0 7
.[[ 
Where[[ 
([[ 
f[[ 
=>[[ 
f[[ 
.[[ 
StatusSesiune[[ +
.[[+ ,
Equals[[, 2
([[2 3
StatusSesiune[[3 @
.[[@ A
Deschis[[A H
)[[H I
)[[I J
.\\ 
Select\\ 
(\\ 
f\\ 
=>\\ 
f\\ 
.\\ 
IdCD\\ #
)\\# $
;\\$ %
if^^ 
(^^ 
statusSesiune^^ 
.^^ 
Equals^^ #
(^^# $
StatusSesiune^^$ 1
.^^1 2
Deschis^^2 9
)^^9 :
)^^: ;
return__ 
initialList__ "
.__" #
Where__# (
(__( )
f__) *
=>__+ - 
listaSesiuniDeschise__. B
.__B C
Contains__C K
(__K L
f__L M
.__M N
ID__N P
)__P Q
)__Q R
;__R S
else`` 
returnaa 
initialListaa "
.aa" #
Whereaa# (
(aa( )
faa) *
=>aa+ -
!aa. / 
listaSesiuniDeschiseaa/ C
.aaC D
ContainsaaD L
(aaL M
faaM N
.aaN O
IDaaO Q
)aaQ R
)aaR S
;aaS T
}bb 	
publicdd 
asyncdd 
Taskdd 
<dd 
ActionResultdd &
<dd& '
CDdd' )
>dd) *
>dd* +
UpdateItemAsyncdd, ;
(dd; <
intdd< ?
iddd@ B
,ddB C
CDUpdateDTOddD O
entityddP V
)ddV W
{ee 	
ifff 
(ff 
!ff 
CDExistsff 
(ff 
idff 
)ff 
)ff 
throwgg 
newgg 
	Exceptiongg #
(gg# $
$strgg$ O
)ggO P
;ggP Q
CDii 
retrievedCDii 
=ii 
awaitii "
_contextii# +
.ii+ ,
CDsii, /
.ii/ 0
FirstOrDefaultAsyncii0 C
(iiC D
fiiD E
=>iiF H
fiiI J
.iiJ K
IDiiK M
==iiN P
idiiQ S
)iiS T
;iiT U
CDkk 
tempCDkk 
=kk 
newkk 
(kk 
entitykk "
.kk" #
Numekk# '
,kk' (
retrievedCDll  +
.ll+ ,
DimensiuneMBll, 8
,ll8 9
entitymm  &
.mm& '#
VitezaMaxInscriptionaremm' >
,mm> ?
retrievedCDnn  +
.nn+ ,
Tipnn, /
,nn/ 0
retrievedCDoo  +
.oo+ ,
SpatiuOcupatoo, 8
,oo8 9
retrievedCDpp  +
.pp+ ,
NrDeSesiunipp, 7
)qq  !
;qq! "
tempCDrr 
.rr 
IDrr 
=rr 
idrr 
;rr 
_contexttt 
.tt 
Entrytt 
(tt 
retrievedCDtt &
)tt& '
.tt' (
CurrentValuestt( 5
.tt5 6
	SetValuestt6 ?
(tt? @
tempCDtt@ F
)ttF G
;ttG H
tryvv 
{ww 
awaitxx 
_contextxx 
.xx 
SaveChangesAsyncxx /
(xx/ 0
)xx0 1
;xx1 2
}yy 
catchzz 
(zz (
DbUpdateConcurrencyExceptionzz /
)zz/ 0
{{{ 
throw|| 
;|| 
}}} 
return 
tempCD 
; 
}
ÄÄ 	
private
ÇÇ 
bool
ÇÇ 
CDExists
ÇÇ 
(
ÇÇ 
int
ÇÇ !
id
ÇÇ" $
)
ÇÇ$ %
{
ÉÉ 	
return
ÑÑ 
_context
ÑÑ 
.
ÑÑ 
CDs
ÑÑ 
.
ÑÑ  
Any
ÑÑ  #
(
ÑÑ# $
e
ÑÑ$ %
=>
ÑÑ& (
e
ÑÑ) *
.
ÑÑ* +
ID
ÑÑ+ -
==
ÑÑ. 0
id
ÑÑ1 3
)
ÑÑ3 4
;
ÑÑ4 5
}
ÖÖ 	
}
ÜÜ 
}áá ≥
:E:\repos\MISC-GestiuneCD\Services\Interfaces\ICDService.cs
	namespace 	

GestiuneCD
 
. 
Services 
. 

Interfaces (
{ 
public 

	interface 

ICDService 
<  
T  !
>! "
where# (
T) *
:+ ,

BaseEntity- 7
{		 
Task

 
<

 
T

 
>

 
GetItemByIdAsync

  
(

  !
int

! $
id

% '
)

' (
;

( )
Task 
< 
IEnumerable 
< 
T 
> 
> 
GetItemsAsync *
(* +
bool+ /
?/ 0
orderedByName1 >
=? @
falseA F
,F G
boolH L
?L M
orderedBySizeN [
=\ ]
false^ c
,c d
inte h
?h i
minSpatiuLiberj x
=y z
$num{ |
,| }!
VitezaInscriptionare	~ í
?
í ì%
vitezaMaxInscriptionare
î ´
=
¨ ≠
null
Æ ≤
,
≤ ≥
TipCD
¥ π
?
π ∫
tipCD
ª ¿
=
¡ ¬
null
√ «
,
« »
bool
… Õ
?
Õ Œ
cuSesiuniDeschise
œ ‡
=
· ‚
null
„ Á
)
Á Ë
;
Ë È
Task 
< 
ActionResult 
< 
T 
> 
> 
UpdateItemAsync -
(- .
int. 1
id2 4
,4 5
CDUpdateDTO6 A
entityB H
)H I
;I J
Task 
< 
ActionResult 
< 
T 
> 
> 
CreateItemAsync -
(- .

CDSetupDTO. 8
entity9 ?
)? @
;@ A
Task 
< 
ActionResult 
< 
T 
> 
> 
DeleteItemAsync -
(- .
int. 1
id2 4
)4 5
;5 6
} 
} Ó
?E:\repos\MISC-GestiuneCD\Services\Interfaces\ISesiuneService.cs
	namespace 	

GestiuneCD
 
. 
Services 
. 

Interfaces (
{ 
public 

	interface 
ISesiuneService $
<$ %
T% &
>& '
where( -
T. /
:0 1

BaseEntity2 <
{ 
Task		 
<		 
T		 
>		 
GetItemByIdAsync		  
(		  !
int		! $
id		% '
)		' (
;		( )
Task

 
<

 
IEnumerable

 
<

 
T

 
>

 
>

 
GetItemsAsync

 *
(

* +
)

+ ,
;

, -
Task 
< 
ActionResult 
< 
T 
> 
> 
UpdateItemAsync -
(- .
int. 1
id2 4
)4 5
;5 6
Task 
< 
ActionResult 
< 
T 
> 
> 
CreateItemAsync -
(- .
SesiuneSetupDTO. =
entity> D
,D E
decimalE L
?L M!
spatiuAditionalOcupatN c
)c d
;d e
Task 
< 
ActionResult 
< 
T 
> 
> 
DeleteItemAsync -
(- .
int. 1
id2 4
)4 5
;5 6
Task 
< 
IEnumerable 
< 
T 
> 
> $
InchideSesiunileDeschise 5
(5 6
)6 7
;7 8
} 
} €}
3E:\repos\MISC-GestiuneCD\Services\SesiuneService.cs
	namespace		 	

GestiuneCD		
 
.		 
Services		 
{

 
public 

class 
SesiuneService 
:  !
ISesiuneService" 1
<1 2
Sesiune2 9
>9 :
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
SesiuneService 
( 
AppDbContext *
context+ 2
)2 3
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
ActionResult &
<& '
Sesiune' .
>. /
>/ 0
CreateItemAsync1 @
(@ A
SesiuneSetupDTOA P
entityQ W
,W X
decimalX _
?_ `!
spatiuAditionalOcupata v
)v w
{ 	
if 
( 
! 
_context 
. 
CDs 
. 
Any  
(  !
f! "
=># %
f& '
.' (
ID( *
==+ -
entity. 4
.4 5
IdCD5 9
)9 :
): ;
throw 
new 
	Exception #
(# $
$str$ O
)O P
;P Q
if 
( 
_context 
. 
Sesiuni  
.  !
Any! $
($ %
f% &
=>' )
f* +
.+ ,
IdCD, 0
==1 3
entity4 :
.: ;
IdCD; ?
&&@ B
fC D
.D E
StatusSesiuneE R
.R S
EqualsS Y
(Y Z
StatusSesiuneZ g
.g h
Deschish o
)o p
)p q
)q r
throw 
new 
	Exception #
(# $
$str$ [
)[ \
;\ ]
if 
( 
entity 
. 

TipSesiune !
.! "
Equals" (
(( )

TipSesiune) 3
.3 4
Scriere4 ;
); <
&&= ?
(@ A
!A B!
spatiuAditionalOcupatB W
.W X
HasValueX `
||a c!
spatiuAditionalOcupatd y
<=y {
$num{ |
)| }
)} ~
throw 
new 
	Exception #
(# $
$str$ l
)l m
;m n
if   
(   
entity   
.   

TipSesiune    
.    !
Equals  ! '
(  ' (

TipSesiune  ( 2
.  2 3
Scriere  3 :
)  : ;
&&  < >
(  ? @
entity  @ F
.  F G 
VitezaInscriptionare  G [
==  \ ^
null  _ c
)  c d
)  d e
throw!! 
new!! 
	Exception!! #
(!!# $
$str!!$ p
)!!p q
;!!q r
CD## 
CDVizat## 
=## 
await## 
_context## '
.##' (
CDs##( +
.##+ ,
FirstOrDefaultAsync##, ?
(##? @
f##@ A
=>##B D
f##E F
.##F G
ID##G I
==##J L
entity##M S
.##S T
IdCD##T X
)##X Y
;##Y Z
if&& 
(&& 
entity&& 
.&& 

TipSesiune&& !
.&&! "
Equals&&" (
(&&( )

TipSesiune&&) 3
.&&3 4
Scriere&&4 ;
)&&; <
&&&&= ?
(&&@ A
!&&A B
CDVizat&&B I
.&&I J
Tip&&J M
.&&M N
Equals&&N T
(&&T U
TipCD&&U Z
.&&Z [
CDRW&&[ _
)&&_ `
)&&` a
)&&a b
throw'' 
new'' 
	Exception'' #
(''# $
$str''$ P
)''P Q
;''Q R
if)) 
()) 
entity)) 
.))  
VitezaInscriptionare)) +
>)), -
CDVizat)). 5
.))5 6#
VitezaMaxInscriptionare))6 M
)))M N
throw** 
new** 
	Exception** #
(**# $
$str**$ g
)**g h
;**h i
if,, 
(,, 
entity,, 
.,, 

TipSesiune,,  
.,,  !
Equals,,! '
(,,' (

TipSesiune,,( 2
.,,2 3
Scriere,,3 :
),,: ;
&&,,< >
(,,? @!
spatiuAditionalOcupat,,@ U
>,,V W
(,,X Y
CDVizat,,Y `
.,,` a
DimensiuneMB,,a m
-,,n o
CDVizat,,p w
.,,w x
SpatiuOcupat	,,x Ñ
)
,,Ñ Ö
)
,,Ö Ü
)
,,Ü á
throw-- 
new-- 
	Exception-- #
(--# $
$str--$ O
+--P Q
(--R S
CDVizat--S Z
.--Z [
DimensiuneMB--[ g
---h i
CDVizat--j q
.--q r
SpatiuOcupat--r ~
)--~ 
+
--Ä Å
$str
--Ç è
)
--è ê
;
--ê ë 
VitezaInscriptionare//  
?//  ! 
vitezaInscriptionare//" 6
=//7 8
null//9 =
;//= >
if00 
(00 
entity00 
.00 

TipSesiune00 !
.00! "
Equals00" (
(00( )

TipSesiune00) 3
.003 4
Scriere004 ;
)00; <
)00< = 
vitezaInscriptionare11 $
=11% &
entity11' -
.11- . 
VitezaInscriptionare11. B
;11B C
Sesiune33 
sesiuneNoua33 
=33  !
new33" %
(33% &
CDVizat33& -
,33- .
entity33/ 5
.335 6
IdCD336 :
,33: ;
DateTime33< D
.33D E
Now33E H
,33H I
null33J N
,33N O
entity33P V
.33V W

TipSesiune33W a
,33a b 
vitezaInscriptionare33c w
,33w x
StatusSesiune	33x Ö
.
33Ö Ü
Deschis
33Ü ç
)
33ç é
;
33é è
try55 
{66 
_context88 
.88 
Sesiuni88  
.88  !
Add88! $
(88$ %
sesiuneNoua88% 0
)880 1
;881 2
CD;; 
CDNou;; 
=;; 
CDVizat;; "
;;;" #
CDNou<< 
.<< 
NrDeSesiuni<< !
++<<! #
;<<# $
CDNou>> 
.>> 
SpatiuOcupat>> "
=>># $
(>>% &
decimal>>& -
)>>- .
(>>. /
(>>/ 0
sesiuneNoua>>0 ;
.>>; <

TipSesiune>>< F
.>>F G
Equals>>G M
(>>M N

TipSesiune>>N X
.>>X Y
Scriere>>Y `
)>>` a
)>>a b
?>>c d
(>>e f
CDNou>>f k
.>>k l
SpatiuOcupat>>l x
+>>y z"
spatiuAditionalOcupat	>>{ ê
)
>>ê ë
:
>>í ì
CDNou
>>î ô
.
>>ô ö
SpatiuOcupat
>>ö ¶
)
>>¶ ß
;
>>ß ®
_context?? 
.?? 
Entry?? 
(?? 
CDVizat?? &
)??& '
.??' (
CurrentValues??( 5
.??5 6
	SetValues??6 ?
(??? @
CDNou??@ E
)??E F
;??F G
awaitAA 
_contextAA 
.AA 
SaveChangesAsyncAA /
(AA/ 0
)AA0 1
;AA1 2
}BB 
catchCC 
(CC (
DbUpdateConcurrencyExceptionCC /
)CC/ 0
{DD 
throwEE 
;EE 
}FF 
returnHH 
sesiuneNouaHH 
;HH 
}II 	
publicKK 
asyncKK 
TaskKK 
<KK 
ActionResultKK &
<KK& '
SesiuneKK' .
>KK. /
>KK/ 0
DeleteItemAsyncKK1 @
(KK@ A
intKKA D
idKKE G
)KKG H
{LL 	
ifMM 
(MM 
!MM 
SesiuneaExistaMM 
(MM  
idMM  "
)MM" #
)MM# $
throwNN 
newNN 
	ExceptionNN #
(NN# $
$strNN$ O
)NNO P
;NNP Q
SesiunePP 
tempSesiunePP 
=PP  !
awaitPP" '
_contextPP( 0
.PP0 1
	FindAsyncPP1 :
<PP: ;
SesiunePP; B
>PPB C
(PPC D
idPPD F
)PPF G
;PPG H
tryRR 
{RR 
_contextTT 
.TT 
RemoveTT 
(TT  
tempSesiuneTT  +
)TT+ ,
;TT, -
CDWW 
CDVizatWW 
=WW 
awaitWW "
_contextWW# +
.WW+ ,
CDsWW, /
.WW/ 0
FirstOrDefaultAsyncWW0 C
(WWC D
fWWD E
=>WWF H
fWWI J
.WWJ K
IDWWK M
==WWN P
tempSesiuneWWQ \
.WW\ ]
IdCDWW] a
)WWa b
;WWb c
CDXX 
CDNouXX 
=XX 
CDVizatXX "
;XX" #
CDNouYY 
.YY 
NrDeSesiuniYY !
--YY! #
;YY# $
_contextZZ 
.ZZ 
EntryZZ 
(ZZ 
CDVizatZZ &
)ZZ& '
.ZZ' (
CurrentValuesZZ( 5
.ZZ5 6
	SetValuesZZ6 ?
(ZZ? @
CDNouZZ@ E
)ZZE F
;ZZF G
await\\ 
_context\\ 
.\\ 
SaveChangesAsync\\ /
(\\/ 0
)\\0 1
;\\1 2
}]] 
catch^^ 
(^^ (
DbUpdateConcurrencyException^^ /
)^^/ 0
{__ 
throw`` 
;`` 
}aa 
returncc 
tempSesiunecc 
;cc 
}dd 	
publicff 
asyncff 
Taskff 
<ff 
Sesiuneff !
>ff! "
GetItemByIdAsyncff# 3
(ff3 4
intff4 7
idff8 :
)ff: ;
{gg 	
ifhh 
(hh 
!hh 
SesiuneaExistahh 
(hh  
idhh  "
)hh" #
)hh# $
throwii 
newii 
	Exceptionii #
(ii# $
$strii$ O
)iiO P
;iiP Q
returnkk 
awaitkk 
_contextkk !
.kk! "
	FindAsynckk" +
<kk+ ,
Sesiunekk, 3
>kk3 4
(kk4 5
idkk5 7
)kk7 8
;kk8 9
}ll 	
publicnn 
asyncnn 
Tasknn 
<nn 
IEnumerablenn %
<nn% &
Sesiunenn& -
>nn- .
>nn. /
GetItemsAsyncnn0 =
(nn= >
)nn> ?
{oo 	
returnpp 
awaitpp 
_contextpp !
.pp! "
Sesiunipp" )
.pp) *
ToListAsyncpp* 5
(pp5 6
)pp6 7
;pp7 8
}qq 	
publicss 
asyncss 
Taskss 
<ss 
ActionResultss &
<ss& '
Sesiuness' .
>ss. /
>ss/ 0
UpdateItemAsyncss1 @
(ss@ A
intssA D
idssE G
)ssG H
{tt 	
ifuu 
(uu 
!uu 
SesiuneaExistauu 
(uu  
iduu  "
)uu" #
)uu# $
throwvv 
newvv 
	Exceptionvv #
(vv# $
$strvv$ O
)vvO P
;vvP Q
Sesiunexx 
sesiuneVizataxx !
=xx" #
awaitxx$ )
_contextxx* 2
.xx2 3
Sesiunixx3 :
.xx: ;
FirstOrDefaultAsyncxx; N
(xxN O
fxxO P
=>xxQ S
fxxT U
.xxU V
IDxxV X
==xxY [
idxx\ ^
)xx^ _
;xx_ `
ifzz 
(zz 
sesiuneVizatazz 
.zz 
StatusSesiunezz *
.zz* +
Equalszz+ 1
(zz1 2
StatusSesiunezz2 ?
.zz? @
Inchiszz@ F
)zzF G
)zzG H
throw{{ 
new{{ 
	Exception{{ #
({{# $
$str{{$ H
){{H I
;{{I J
Sesiune}} 
sesiuneNoua}} 
=}}  !
sesiuneVizata}}" /
;}}/ 0
sesiuneNoua~~ 
.~~ 
StatusSesiune~~ %
=~~& '
StatusSesiune~~( 5
.~~5 6
Inchis~~6 <
;~~< =
sesiuneNoua 
. 
EndDateTime #
=$ %
DateTime& .
.. /
Now/ 2
;2 3
try
ÅÅ 
{
ÇÇ 
_context
ÉÉ 
.
ÉÉ 
Entry
ÉÉ 
(
ÉÉ 
sesiuneVizata
ÉÉ ,
)
ÉÉ, -
.
ÉÉ- .
CurrentValues
ÉÉ. ;
.
ÉÉ; <
	SetValues
ÉÉ< E
(
ÉÉE F
sesiuneNoua
ÉÉF Q
)
ÉÉQ R
;
ÉÉR S
await
ÑÑ 
_context
ÑÑ 
.
ÑÑ 
SaveChangesAsync
ÑÑ /
(
ÑÑ/ 0
)
ÑÑ0 1
;
ÑÑ1 2
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ *
DbUpdateConcurrencyException
ÜÜ /
)
ÜÜ/ 0
{
áá 
throw
àà 
;
àà 
}
ââ 
return
ãã 
sesiuneNoua
ãã 
;
ãã 
}
åå 	
private
çç 
bool
çç 
SesiuneaExista
çç #
(
çç# $
int
çç$ '
id
çç( *
)
çç* +
{
éé 	
return
èè 
_context
èè 
.
èè 
Sesiuni
èè #
.
èè# $
Any
èè$ '
(
èè' (
e
èè( )
=>
èè* ,
e
èè- .
.
èè. /
ID
èè/ 1
==
èè2 4
id
èè5 7
)
èè7 8
;
èè8 9
}
êê 	
public
íí 
async
íí 
Task
íí 
<
íí 
IEnumerable
íí %
<
íí% &
Sesiune
íí& -
>
íí- .
>
íí. /&
InchideSesiunileDeschise
íí0 H
(
ííH I
)
ííI J
{
ìì 	
List
îî 
<
îî 
Sesiune
îî 
>
îî 
sesiuniDeschise
îî )
=
îî* +
_context
îî, 4
.
îî4 5
Sesiuni
îî5 <
.
îî< =
Where
îî= B
(
îîB C
f
îîC D
=>
îîE G
f
îîH I
.
îîI J
StatusSesiune
îîJ W
.
îîW X
Equals
îîX ^
(
îî^ _
StatusSesiune
îî_ l
.
îîl m
Deschis
îîm t
)
îît u
)
îîu v
.
îîv w
ToList
îîw }
(
îî} ~
)
îî~ 
;îî Ä
foreach
ññ 
(
ññ 
var
ññ 
item
ññ 
in
ññ  
sesiuniDeschise
ññ! 0
)
ññ0 1
{
ññ2 3
Sesiune
óó 
tempSesiune
óó #
=
óó$ %
item
óó& *
;
óó* +
tempSesiune
òò 
.
òò 
StatusSesiune
òò )
=
òò* +
StatusSesiune
òò, 9
.
òò9 :
Inchis
òò: @
;
òò@ A
tempSesiune
ôô 
.
ôô 
EndDateTime
ôô '
=
ôô( )
DateTime
ôô* 2
.
ôô2 3
Now
ôô3 6
;
ôô6 7
_context
öö 
.
öö 
Entry
öö 
(
öö 
item
öö #
)
öö# $
.
öö$ %
CurrentValues
öö% 2
.
öö2 3
	SetValues
öö3 <
(
öö< =
tempSesiune
öö= H
)
ööH I
;
ööI J
}
õõ 
await
ùù 
_context
ùù 
.
ùù 
SaveChangesAsync
ùù +
(
ùù+ ,
)
ùù, -
;
ùù- .
return
üü 
sesiuniDeschise
üü "
;
üü" #
}
†† 	
}
°° 
}¢¢ 